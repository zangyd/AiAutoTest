# 共享组件使用规范

## 目录结构

```
common/
├── utils/      # 共享工具函数
├── fixtures/   # 共享测试固件
└── config/     # 共享配置
```

## 使用规范

### 1. 通用原则

- 只放置确实需要在多个测试类型间共享的代码
- 保持代码的通用性和可复用性
- 避免引入特定测试类型的依赖
- 确保充分的测试覆盖
- 维护清晰的文档和注释

### 2. 各目录用途

#### utils/
- 通用工具函数
- 数据处理工具
- 日志工具
- 文件操作工具
- 其他可复用的工具类

#### fixtures/
- 可在多种测试类型中复用的测试固件
- 数据库连接固件
- 配置加载固件
- 日志设置固件
- 其他通用测试准备工作

#### config/
- 共享配置文件
- 环境变量配置
- 日志配置
- 其他通用配置

### 3. 代码规范

1. **命名规范**：
   - 文件名使用小写字母和下划线
   - 类名使用驼峰命名
   - 函数和变量使用小写字母和下划线
   - 常量使用大写字母和下划线

2. **文档规范**：
   - 所有公共接口必须有文档字符串
   - 包含使用示例
   - 说明参数类型和返回值
   - 注明可能的异常

3. **测试规范**：
   - 所有共享代码必须有单元测试
   - 测试覆盖率要求大于80%
   - 包含边界条件测试
   - 包含异常处理测试

### 4. 使用流程

1. **添加新的共享代码**：
   - 评估是否真正需要共享
   - 在适当的子目录中创建文件
   - 编写完整的测试用例
   - 更新文档

2. **使用共享代码**：
   - 通过相对导入使用共享组件
   - 遵循示例文档的使用方式
   - 报告发现的问题

3. **维护共享代码**：
   - 定期审查使用情况
   - 及时更新过时的代码
   - 删除未使用的代码
   - 保持向后兼容性

### 5. 注意事项

1. **依赖管理**：
   - 最小化外部依赖
   - 明确声明所有依赖
   - 处理依赖冲突

2. **性能考虑**：
   - 优化频繁使用的代码
   - 避免重复计算
   - 合理使用缓存

3. **安全考虑**：
   - 安全处理敏感数据
   - 避免硬编码密钥
   - 使用安全的API

4. **版本控制**：
   - 遵循语义化版本
   - 记录重要更改
   - 维护更新日志 